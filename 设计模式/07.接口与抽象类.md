
[TOC]

## 抽象类

使用抽象类，实现面向对象的继承特性和模板设计模式。

继承关系是一种 is-a 关系，抽象类实际上是一种特殊的类，表示 is-a 的关系。

### 抽象类的语法特性

1. 抽象类不允许被实例化，只能被继承。
2. 抽象类可以包含属性和方法。
3. 子类继承抽象类，必须实现抽象类中的所有抽象方法。


## 接口

使用接口，实现面向对象的抽象特性、多态特性和基于接口而非实现的设计原则。

接口，仅仅是对方法的抽象，表示一种 has-a 关系，表示具有某些功能（某一组行为特性）。对于接口，更加形象的叫法，就是协议 contract。

### 接口的语法特性

1. 接口不能包含属性。
2. 接口只能声明方法，方法不能包含代码实现。
3. 类实现接口时，必须实现接口中声明的所有方法。


## 抽象类解决的编程问题

继承能解决代码复用的问题，抽象类也是为了代码复用而生的。

如果不使用抽象类，而是普通类，虽然继承能达到代码复用的目的，但是无法使用多态特性了。
如果定义一个空的方法，让子类覆写实现各自的逻辑，虽然能实现功能，但没有抽象类的实现思路优雅。
- 定义空方法，会影响代码的可读性。
- 不覆写方法，抽象类编译错误，提醒开发人员，而普通类没有提醒。


## 接口解决的编程问题

接口更加侧重于解耦。
隔离接口和具体实现，提高代码的**扩展性**。

接口是对行为的一种抽象，相当于一组协议或者协议。调用者只需关注接口，不需要了解具体实现。

接口是一个比抽象类更加广泛、更加重要的知识点。

- 基于接口而非实现编程，提高代码灵活性、扩展性的设计思想。


## 模拟抽象类语法概念

抽象类定义：不允许被实例化，只能被继承；可以包含属性和方法；子类继承抽象类，必须实现抽象类中的所有抽象方法。

只要满足抽象类定义，从设计的角度，就可以称之为抽象类。

- 使用普通类模拟抽象类
    - 避免这个类被实例化
        - 把构造函数声明为 protected 访问权限
    - 普通类可以包含属性和方法
    - 抽象类中抽象方法，可以让普通类中方法抛出 MethodUnSupportedException 异常
        - 模拟不包含实现的抽象方法
        - 强迫子类在继承这个父类时，必须主动实现父类中方法，否则在运行时抛异常
    

## 模拟接口语法概念

接口定义：没有成员变量，只有方法声明，没有方法实现，实现接口的类必须实现接口中所有方法。

只要满足接口定义，从设计的角度，就可以称之为接口。

- 使用抽象类模拟接口
    - 抽象类中不定义任何属性
    - 所有方法都声明为 abstract
- 使用普通类模拟接口
    - 接口定义中没有方法实现，而普通类方法必须包含实现
        - 让类中方法抛出 MethodUnSupportedException 异常
        - 模拟不包含实现的接口
        - 强迫子类在继承这个父类时，必须主动实现父类中方法，否则在运行时抛异常
    - 避免这个类被实例化
        - 把构造函数声明为 protected 访问权限
- 对于动态语言来说，还可以使用 duck-typing，对接口支持

## 使用抽象类/接口的判断标准

- 要表示一种 is-a 关系，并且是为了解决代码复用的问题，使用抽象类
- 要表示一种 has-a 关系，并且是为了解决抽象而非代码复用问题，使用接口

从**类的继承层次**上来看

- 抽象类，是一种自下而上的设计思路，先有子类的代码重复，然后再抽象成上层的父类（抽象类）
- 接口，是一种自上而下的设计思路，在编程时，先设计接口，再去考虑具体的实现
