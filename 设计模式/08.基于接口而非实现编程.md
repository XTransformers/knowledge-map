[TOC]

## 基于接口而实现编程原则

基于接口而非实现编程，是一种非常有效的提高代码质量的手段。

基于接口而非实现编程
Program to an interface, not an implementation.

这条原则，最早出现于 1994 年的 GoF 的 《设计模式》，是一条比较抽象、泛化的设计思想。

之所以这条原则能提高代码质量，是因为，应用这条原则

- 可以将接口和实现相分离，封装不稳定的实现，暴露稳定的接口
- 上游系统面向接口而非实现编程，不依赖不稳定的实现细节
- 当实现发生变化时，上游系统代码基本上不用做改动
- 以此来降低耦合性，提高扩展性

更能体现原则的设计初衷的表述：基于抽象而非实现编程。

**越抽象、越顶层、越脱离具体某一实现的设计，越能提高代码的灵活性、扩展性、可维护性。**
好的代码设计，不仅能应对当下的需求，而且在将来需求发生变化时，仍然能够在不破坏原有代码设计的情况下灵活应对。
**抽象**，就是提高代码**扩展性、灵活性、可维护性**最有效的手段之一。


## 实战指导

软件开发中，唯一不变的，就是变化。

细节是魔鬼。

需求变化了，具体的实现方式需要变动。

要遵从“基于接口而非实现编程”的原则，需要做到以下3点：

1. 函数的命名不能暴露任何实现细节
2. 封装具体的实现细节
3. 为实现类定义抽象的接口

误区：
很多人在定义接口时，希望通过实现类来反推接口的定义（先写实现类，然后再把部分方法照抄到接口定义中）。
按照这种思考方式，有可能导致接口定义不够抽象，依赖具体的实现，这样接口设计就没有意义了。

在做软件开发时，一定要有**抽象意识、封装意识、接口意识**。


## 最佳实践

何时定义接口，实现基于接口的编程，何时不需要定义接口，直接使用实现类编程，需要回归到**设计原则诞生的初衷**上来。

原则设计初衷：**将接口和实现相分离，封装不稳定的实现，暴露稳定的接口**。

从这个设计初衷来看，如果在业务场景中，某个功能只有一种实现方式，未来也不可能被其他方式替换，那就没有必要为其设计接口，也没有必要基于接口编程，直接使用实现类就可以了。

扩展性、维护性针对不同系统

- 越是不稳定的系统，越是要在代码的扩展性、维护性上下功夫。
- 相反，如果系统特别稳定，在开发完成后，基本上不需要做维护，就没有必要为其扩展性，投入不必要的开发时间。

“基于接口而非实现编程”这条原则，不仅仅可以知道非常细节的编程开发，还能指导更加上层的架构设计、系统设计等。
